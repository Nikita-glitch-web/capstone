<h2>{{ id ? 'Edit Product' : 'Add Product' }}</h2>

<form [formGroup]="form" (ngSubmit)="save()">
  <mat-form-field appearance="outline" class="w-100">
    <mat-label>Title</mat-label>
    <input matInput formControlName="title" placeholder="Enter product title" />
    <mat-error *ngIf="form.get('title')?.hasError('required')">Title is required</mat-error>
    <mat-error *ngIf="form.get('title')?.hasError('minlength')">Minimum 3 characters</mat-error>
    <mat-error *ngIf="form.get('title')?.hasError('maxlength')">Maximum 80 characters</mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-100">
    <mat-label>Price</mat-label>
    <input matInput type="number" formControlName="price" placeholder="Enter price" />
    <mat-error *ngIf="form.get('price')?.hasError('required')">Price is required</mat-error>
    <mat-error *ngIf="form.get('price')?.value < 0">Price must be positive</mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-100">
    <mat-label>Category</mat-label>
    <mat-select formControlName="category">
      <mat-option *ngFor="let cat of categories" [value]="cat">{{ cat }}</mat-option>
    </mat-select>
    <mat-error *ngIf="form.get('category')?.hasError('required')">Category is required</mat-error>
  </mat-form-field>

  <div class="mt-3 mb-3">
    <label class="mat-body-1">Rating: {{ form.get('rating')?.value }}</label>
    <mat-slider min="0" max="5" step="0.1" showTickMarks discrete>
      <input matSliderThumb formControlName="rating" name="rating" />
    </mat-slider>
    <mat-error *ngIf="form.get('rating')?.hasError('required')">Rating is required</mat-error>
  </div>

  <mat-form-field appearance="outline" class="w-100">
    <mat-label>Stock</mat-label>
    <input matInput type="number" formControlName="stock" placeholder="Available stock" />
    <mat-error *ngIf="form.get('stock')?.hasError('required')">Stock is required</mat-error>
    <mat-error *ngIf="form.get('stock')?.value < 0">Stock must be positive</mat-error>
  </mat-form-field>

  <div class="mt-4">
    <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
      {{ id ? 'Update' : 'Create' }}
    </button>
    <button mat-button type="button" (click)="cancel()">Cancel</button>
  </div>
</form>